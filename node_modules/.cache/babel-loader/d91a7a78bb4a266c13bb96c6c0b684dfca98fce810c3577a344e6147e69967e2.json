{"ast":null,"code":"import _classCallCheck from\"/Users/veronikagennadevna/Desktop/dev/react-mesto-auth/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/Users/veronikagennadevna/Desktop/dev/react-mesto-auth/node_modules/@babel/runtime/helpers/esm/createClass.js\";var Auth=/*#__PURE__*/function(){function Auth(_ref){var baseUrl=_ref.baseUrl;_classCallCheck(this,Auth);this._baseUrl=baseUrl;}_createClass(Auth,[{key:\"_getResponse\",value:function _getResponse(res){if(res.ok){return res.json();}else{return Promise.reject(\"\\u041E\\u0448\\u0438\\u0431\\u043A\\u0430: \".concat(res.status));}}},{key:\"register\",value:function register(email,password){return fetch(\"\".concat(this._baseUrl,\"/signup\"),{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({email:\"\".concat(email),password:\"\".concat(password)})}).then(this._getResponse);}},{key:\"login\",value:function login(email,password){return fetch(\"\".concat(this._baseUrl,\"/signin\"),{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({email:email,password:password})}).then(this._getResponse).then(function(data){console.log('Data received:',data);if(data.token){localStorage.setItem('token',data.token);return data;}});}},{key:\"checkToken\",value:function checkToken(){return fetch(\"\".concat(this._baseUrl,\"/users/me\"),{method:'GET',headers:{'Content-Type':'application/json',Authorization:\"Bearer \".concat(localStorage.getItem('token'))}}).then(this._getResponse).then(function(data){return data;});}}]);return Auth;}();export var auth=new Auth({baseUrl:'https://auth.nomoreparties.co'});","map":{"version":3,"names":["Auth","_ref","baseUrl","_classCallCheck","_baseUrl","_createClass","key","value","_getResponse","res","ok","json","Promise","reject","concat","status","register","email","password","fetch","method","headers","body","JSON","stringify","then","login","data","console","log","token","localStorage","setItem","checkToken","Authorization","getItem","auth"],"sources":["/Users/veronikagennadevna/Desktop/dev/react-mesto-auth/src/utils/auth.js"],"sourcesContent":["class Auth {\n  constructor({ baseUrl }) {\n    this._baseUrl = baseUrl;\n  }\n\n  _getResponse(res) {\n    if (res.ok) {\n      return res.json();\n    } else {\n      return Promise.reject(`Ошибка: ${res.status}`);\n    }\n  }\n\n  register(email, password) {\n    return fetch(`${this._baseUrl}/signup`, {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify({ email: `${email}`, password: `${password}` }),\n    }).then(this._getResponse);\n  }\n\n  login(email, password) {\n    return fetch(`${this._baseUrl}/signin`, {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify({ email: email, password: password }),\n    })\n      .then(this._getResponse)\n      .then((data) => {\n        console.log('Data received:', data);\n        if (data.token) {\n          localStorage.setItem('token', data.token);\n          return data;\n        }\n      });\n  }\n\n  checkToken() {\n    return fetch(`${this._baseUrl}/users/me`, {\n      method: 'GET',\n      headers: {\n        'Content-Type': 'application/json',\n        Authorization: `Bearer ${localStorage.getItem('token')}`,\n      },\n    })\n      .then(this._getResponse)\n      .then((data) => data);\n  }\n}\n\nexport const auth = new Auth({\n  baseUrl: 'https://auth.nomoreparties.co',\n});\n"],"mappings":"yRAAM,CAAAA,IAAI,yBACR,SAAAA,KAAAC,IAAA,CAAyB,IAAX,CAAAC,OAAO,CAAAD,IAAA,CAAPC,OAAO,CAAAC,eAAA,MAAAH,IAAA,EACnB,IAAI,CAACI,QAAQ,CAAGF,OAAO,CACzB,CAACG,YAAA,CAAAL,IAAA,GAAAM,GAAA,gBAAAC,KAAA,CAED,SAAAC,aAAaC,GAAG,CAAE,CAChB,GAAIA,GAAG,CAACC,EAAE,CAAE,CACV,MAAO,CAAAD,GAAG,CAACE,IAAI,EAAE,CACnB,CAAC,IAAM,CACL,MAAO,CAAAC,OAAO,CAACC,MAAM,0CAAAC,MAAA,CAAYL,GAAG,CAACM,MAAM,EAAG,CAChD,CACF,CAAC,GAAAT,GAAA,YAAAC,KAAA,CAED,SAAAS,SAASC,KAAK,CAAEC,QAAQ,CAAE,CACxB,MAAO,CAAAC,KAAK,IAAAL,MAAA,CAAI,IAAI,CAACV,QAAQ,YAAW,CACtCgB,MAAM,CAAE,MAAM,CACdC,OAAO,CAAE,CAAE,cAAc,CAAE,kBAAmB,CAAC,CAC/CC,IAAI,CAAEC,IAAI,CAACC,SAAS,CAAC,CAAEP,KAAK,IAAAH,MAAA,CAAKG,KAAK,CAAE,CAAEC,QAAQ,IAAAJ,MAAA,CAAKI,QAAQ,CAAG,CAAC,CACrE,CAAC,CAAC,CAACO,IAAI,CAAC,IAAI,CAACjB,YAAY,CAAC,CAC5B,CAAC,GAAAF,GAAA,SAAAC,KAAA,CAED,SAAAmB,MAAMT,KAAK,CAAEC,QAAQ,CAAE,CACrB,MAAO,CAAAC,KAAK,IAAAL,MAAA,CAAI,IAAI,CAACV,QAAQ,YAAW,CACtCgB,MAAM,CAAE,MAAM,CACdC,OAAO,CAAE,CAAE,cAAc,CAAE,kBAAmB,CAAC,CAC/CC,IAAI,CAAEC,IAAI,CAACC,SAAS,CAAC,CAAEP,KAAK,CAAEA,KAAK,CAAEC,QAAQ,CAAEA,QAAS,CAAC,CAC3D,CAAC,CAAC,CACCO,IAAI,CAAC,IAAI,CAACjB,YAAY,CAAC,CACvBiB,IAAI,CAAC,SAACE,IAAI,CAAK,CACdC,OAAO,CAACC,GAAG,CAAC,gBAAgB,CAAEF,IAAI,CAAC,CACnC,GAAIA,IAAI,CAACG,KAAK,CAAE,CACdC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAEL,IAAI,CAACG,KAAK,CAAC,CACzC,MAAO,CAAAH,IAAI,CACb,CACF,CAAC,CAAC,CACN,CAAC,GAAArB,GAAA,cAAAC,KAAA,CAED,SAAA0B,WAAA,CAAa,CACX,MAAO,CAAAd,KAAK,IAAAL,MAAA,CAAI,IAAI,CAACV,QAAQ,cAAa,CACxCgB,MAAM,CAAE,KAAK,CACbC,OAAO,CAAE,CACP,cAAc,CAAE,kBAAkB,CAClCa,aAAa,WAAApB,MAAA,CAAYiB,YAAY,CAACI,OAAO,CAAC,OAAO,CAAC,CACxD,CACF,CAAC,CAAC,CACCV,IAAI,CAAC,IAAI,CAACjB,YAAY,CAAC,CACvBiB,IAAI,CAAC,SAACE,IAAI,QAAK,CAAAA,IAAI,GAAC,CACzB,CAAC,WAAA3B,IAAA,KAGH,MAAO,IAAM,CAAAoC,IAAI,CAAG,GAAI,CAAApC,IAAI,CAAC,CAC3BE,OAAO,CAAE,+BACX,CAAC,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}